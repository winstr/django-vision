{% extends 'common/base.html' %}
{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'common/top_navbar_menu.css' %}">
<link rel="stylesheet" href="{% static 'vision_ai/sidebar.css' %}">
<style>
  body {
  overflow-x: hidden;
}

.navbar {
  z-index: 1020;
}

#sidebar {
  width: 300px;
  position: fixed;
  top: 56px;
  left: -300px;
  height: 100vh;
  overflow-y: auto;
  transition: left 0.3s ease;
}

.custom {
  height: calc(100vh - 56px);
}

.content {
  transition: margin-left 0.3s ease;
  margin-left: 0;
}
</style>
{% endblock %}

{% block title %}
<title>Vision AI</title>
{% endblock %}

{% block include %}
{% include 'common/top_navbar_menu.html' %}
{% endblock %}

{% block content%}
<div class="container-fluid bg-body-dark" id="sidebar">
  <h5 class="mt-3">Devices</h5>

  <div class="accordion accordion-flush" id="accordionFlushExample">

    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#flush-collapseOne"
                aria-expanded="false"
                aria-controls="flush-collapseOne">
          Accordion Item #1
        </button>    
      </h2>
      <div id="flush-collapseOne"
           class="accordion-collapse collapse"
           data-bs-parent="#accordionFlushExample">
        <div class="accordion-body">Placeholder content for this accordion</div>
      </div>    
    </div>

    <div class="accordion-item">
      <h2 class="accordion-header">
        <button class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#flush-collapseTwo"
                aria-expanded="false"
                aria-controls="flush-collapseTwo">
          Accordion Item #2
        </button>    
      </h2>
      <div id="flush-collapseTwo"
           class="accordion-collapse collapse"
           data-bs-parent="#accordionFlushExample">
        <div class="accordion-body">Placeholder content for this accordion</div>
      </div>
    </div>

  </div>
</div>

<div class="content bg-body-secondary" id="content">
  <div class="container-fluid">
    <div class="row align-items-center custom">
      <button class="navbar-toggler col-auto align-self-center" type="button" id="sidebarCollapse">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
          <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/>
        </svg>
      </button>
      <div class="col align-self-start pt-3">
        <h1>Content</h1>
        <p>This is a line.</p>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block script %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
  document.querySelector('#sidebarCollapse').addEventListener('click', function () {
    const sidebar = document.getElementById('sidebar');
    const content = document.getElementById('content');
    const sidebarWidth = sidebar.offsetWidth;

    if (sidebar.style.left === '0px') {
      sidebar.style.left = `-${sidebarWidth}px`; // 사이드바 숨김
      content.style.marginLeft = '0'; // 메인 컨텐츠 재배열
    } else {
      sidebar.style.left = '0'; // 사이드바 표시
      content.style.marginLeft = `${sidebarWidth}px`; // 메인 컨텐츠 재배열
    }
  });
});
</script>

{% endblock %}